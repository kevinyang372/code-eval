{% extends "base.html" %}

{% block app_content %}
    <h3> Passed Test Cases: {{ passed }} / {{ total }} </h1>
    <h3> Total Run Time: {{ time }}</h3>

    {% for question in result %}
        <p> Question: {{ question }} </p>
        <table class="table">
            <thead>
                <tr>
                    <th>Test Case</th>
                    <th>Result</th>
                <tr>
            </thead>
            <tbody>
                {% for err in result[question] %}
                <tr>
                    <td>{{ err }}</td>
                    {% if result[question][err] == 'Passed' %}
                        <td><font color="green">{{ result[question][err] }}</font></td>
                    {% else %}
                        <td><font color="red">{{ result[question][err] }}</font></td>
                    {% endif %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endfor %}

    {% if current_user.is_admin %}
        {% for p in plagiarism %}
        
            {% if i == p.first_result_id %}
                <a href="{{ url_for('summary.summary_case', result_id = p.second_result_id) }}">code link</a>
            {% else %}
                <a href="{{ url_for('summary.summary_case', result_id = p.first_result_id) }}">code link</a>
            {% endif %}

            <table class="table">
                <thead>
                    <tr>
                        <th>Test</th>
                        <th>Result</th>
                    <tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Exact Match</td>
                        <td>{{ p.exact_match }}</td>
                    </tr>
                    <tr>
                        <td>Unifying AST</td>
                        <td>{{ p.unifying_ast }}</td>
                    </tr>
                    <tr>
                        <td>Ignore variables</td>
                        <td>{{ p.ignore_variables }}</td>
                    </tr>
                    <tr>
                        <td>Reordering AST</td>
                        <td>{{ p.reordering_ast }}</td>
                    </tr>
                    <tr>
                        <td>Edit Tree</td>
                        <td>{{ p.edit_tree }}</td>
                    </tr>
                </tbody>
            </table>
        {% endfor %}
    {% endif %}

    <div class="card">
      <div class="card-body">
        {{ file|safe }}
      </div>
    </div>

    <a href="{{ url_for('index.index') }}">back</a>
{% endblock %}
