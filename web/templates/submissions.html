{% extends "base.html" %}
{% import 'bootstrap/wtf.html' as wtf %}

{% block app_content %}
{{ codemirror.include_codemirror() }}
<p><b>Runtime</b>: {{session.runtime }}</p>
<p>You could choose to upload your code as a file or paste into the code snippet below</p>
{{ wtf.quick_form(form) }}

<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script>
    $(document).ready(function() {
        editor_for_text.on('change', (editor) => {
            $.ajax({
                type: "POST",
                url: "{{ url_for('submission.codecacher', session_id=session.id) }}",
                contentType: 'application/json',
                dataType: 'json',
                data: JSON.stringify({
                    data: editor.doc.getValue()
                }),
                success: function (data) {
                    console.log(data)
                }
            });
        });
    });
</script>
{% endblock %}